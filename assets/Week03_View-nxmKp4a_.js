import{o as a,c as o,a as t,t as n,g as $,r as v,h as N,i as F,F as y,b as f,j as w,w as Q,v as S,k as V,l as C,n as j}from"./index-Dbu87jjc.js";const B={class:"d-flex w-100 justify-content-between"},D={class:"mb-1"},O={class:"mb-1"},M={__name:"Product",props:{name:String,description:String,price:Number},emits:["add_Cart"],setup(s,{emit:m}){const u=s,p=m,h=()=>{p("add_Cart",u)};return(i,b)=>(a(),o("div",{onClick:$(h,["prevent"])},[t("div",B,[t("h5",D,n(s.name),1),t("small",null,"$"+n(s.price),1)]),t("p",O,n(s.description),1)]))}},P=["disabled"],U={class:"mx-2"},z=["disabled"],A={__name:"Cart",props:{item:Object,subTotal:Number},emits:["update-Cart","remove-FromCart"],setup(s,{emit:m}){const u=s,p=v(u.item.quantity),h=m,i=(r,d)=>{h("update-Cart",{...r,num:d})},b=r=>{h("remove-FromCart",r)};return N(()=>u.item.quantity,r=>{p.value=r}),(r,d)=>(a(),o("tr",null,[t("td",null,[t("button",{type:"button",class:"btn btn-sm btn-danger",onClick:d[0]||(d[0]=g=>b(s.item.id))},"移除 ")]),t("td",null,n(s.item.name),1),t("td",null,[t("small",null,n(s.item.description),1)]),t("td",null,[t("button",{disabled:p.value<=1,class:"btn btn-sm btn-secondary py-1 px-2",onClick:d[1]||(d[1]=g=>i(s.item,-1))},"-",8,P),t("span",U,n(p.value),1),t("button",{disabled:p.value>=10,class:"btn btn-sm btn-primary py-1 px-2",onClick:d[2]||(d[2]=g=>i(s.item,1))},"+",8,z)]),t("td",null,n(s.item.price),1),t("td",null,n(s.subTotal),1)]))}},E={__name:"Order",props:{name:String,quantity:Number,subTotal:Number},setup(s){return v(s.name),(u,p)=>(a(),o("tr",null,[t("td",null,n(s.name),1),t("td",null,n(s.quantity),1),t("td",null,n(s.subTotal),1)]))}},L={class:"container mt-5 py-4 bg-warning bg-opacity-50 shadow"},R=t("div",{class:"mb-4 text-center fs-4 fw-bold"},"QQ餐飲 線上點餐",-1),W={class:"row"},G={class:"col-md-4"},H={class:"list-group"},J={class:"toast-container border-0 rounded position-fixed top-0 end-0 py-1 my-1"},K=t("div",{class:"toast-header py-1"},[t("strong",{class:"me-auto"},"加入購物車"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1),X={class:"toast-body rounded-bottom bg-secondary text-white"},Y={class:"toast-container border-0 rounded position-fixed top-0 end-0 py-1 my-1"},Z=t("div",{class:"toast-header py-1"},[t("strong",{class:"me-auto"},"加入購物車"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1),I={class:"toast-body rounded-bottom bg-danger bg-gradient text-white"},tt={class:"col-md-8"},et={class:"table table-secondary border rounded-3 shadow"},st=t("thead",{class:"text-center fw-bold"},[t("tr",null,[t("th",{scope:"col",width:"80"},"操作"),t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"描述"),t("th",{scope:"col",width:"120"},"數量"),t("th",{scope:"col"},"單價"),t("th",{scope:"col"},"小計")])],-1),at={class:"text-center"},ot={key:0,class:"alert alert-primary text-center",role:"alert"},nt={key:1},it={class:"text-end mb-3"},lt={class:"text-end"},ct=t("hr",null,null,-1),rt={class:"row justify-content-center"},dt={class:"col-8"},ut={key:0,class:"alert alert-secondary text-center",role:"alert"},mt={key:1,class:"card"},pt={class:"card-body"},vt={class:"card-title"},bt=t("h5",null,"訂單",-1),ht={class:"table"},_t=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"品項"),t("th",{scope:"col"},"數量"),t("th",{scope:"col"},"小計")])],-1),yt={class:"text-end"},ft={class:"text-end"},wt={__name:"Week03_View",setup(s){const m=v([]),u=v([]),h=v([{id:1,name:"珍珠奶茶",description:"香濃奶茶搭配QQ珍珠",price:50},{id:2,name:"冬瓜檸檬",description:"清新冬瓜配上新鮮檸檬",price:45},{id:3,name:"翡翠檸檬",description:"綠茶與檸檬的完美結合",price:55},{id:4,name:"四季春茶",description:"香醇四季春茶，回甘無比",price:45},{id:5,name:"阿薩姆奶茶",description:"阿薩姆紅茶搭配香醇鮮奶",price:50},{id:6,name:"檸檬冰茶",description:"檸檬與冰茶的清新組合",price:45},{id:7,name:"芒果綠茶",description:"芒果與綠茶的獨特風味",price:55},{id:8,name:"抹茶拿鐵",description:"抹茶與鮮奶的絕配",price:60}]),i=v([]),b=v(""),r=v({}),d=F(()=>i.value.reduce((l,c)=>l+c.price*c.quantity,0)),g=l=>{const c=i.value.find(e=>e.name===l.name);if(c){c.quantity+=1,u.value.push({message:`${l.name} 已存在購物車`}),setTimeout(()=>u.value.shift(),3e3);return}i.value.push({...l,id:new Date().getTime(),quantity:1}),m.value.push({message:`${l.name} 已加入購物車`}),setTimeout(()=>m.value.shift(),3e3)},T=l=>{i.value=i.value.map(c=>(c.id===l.id&&(c.quantity+=l.num),c))},k=l=>{i.value=i.value.filter(c=>c.id!==l)},q=()=>{r.value={id:new Date().getTime(),cart:i.value,description:b.value,sum:d.value},i.value=[],b.value=""},x=l=>l.price*l.quantity;return(l,c)=>(a(),o("div",L,[R,t("div",W,[t("div",G,[t("div",H,[(a(!0),o(y,null,f(h.value,e=>(a(),o("div",{key:e.id,class:"list-group-item list-group-item-action"},[V(M,{name:e.name,price:e.price,description:e.description,onAdd_Cart:g},null,8,["name","price","description"])]))),128))])]),t("div",J,[(a(!0),o(y,null,f(m.value,(e,_)=>(a(),o("div",{key:_,class:"toast show shadow fs-6 fw-bold",role:"alert","aria-live":"assertive","aria-atomic":"true"},[K,t("div",X,n(e.message),1)]))),128))]),t("div",Y,[(a(!0),o(y,null,f(u.value,(e,_)=>(a(),o("div",{key:_,class:"toast show shadow fs-6 fw-bold",role:"alert","aria-live":"assertive","aria-atomic":"true"},[Z,t("div",I,n(e.message),1)]))),128))]),t("div",tt,[t("table",et,[st,t("tbody",at,[(a(!0),o(y,null,f(i.value,(e,_)=>(a(),C(A,{key:e.id,class:j({"table-info":_%2==0,"table-light":_%2!==0}),item:e,subTotal:x(e),onUpdateCart:T,onRemoveFromCart:k},null,8,["class","item","subTotal"]))),128))])]),i.value.length===0?(a(),o("div",ot," 請選擇商品 ")):(a(),o("div",nt,[t("div",it,[t("h5",null,[w("總計: "),t("span",null,"$"+n(d.value),1)])]),Q(t("textarea",{class:"form-control mb-3",rows:"3",placeholder:"備註","onUpdate:modelValue":c[0]||(c[0]=e=>b.value=e)},null,512),[[S,b.value]]),t("div",lt,[t("button",{class:"btn btn-primary",onClick:$(q,["prevent"])}," 送出 ")])]))])]),ct,t("div",rt,[t("div",dt,[r.value.id?(a(),o("div",mt,[t("div",pt,[t("div",vt,[bt,t("table",ht,[_t,t("tbody",null,[(a(!0),o(y,null,f(r.value.cart,e=>(a(),C(E,{key:e.id,name:e.name,quantity:e.quantity,subTotal:x(e)},null,8,["name","quantity","subTotal"]))),128))])]),t("div",yt,[w(" 備註: "),t("span",null,n(r.value.description),1)]),t("div",ft,[t("h5",null,[w("總計: "),t("span",null,"$"+n(r.value.sum),1)])])])])])):(a(),o("div",ut," 尚未建立訂單 "))])])]))}};export{wt as default};
